@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title UI Sequence Diagram (SSD) - US21 - Add new entry to the To-Do-List

autonumber

'hide footbox
actor "Green Spaces Manager (GSM)" as GSM
participant ":RegisterEntryToDoListUI" as UI
participant ":RegisterEntryToDoListController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "manager\n:GreenSpaceManager" as GSMO
participant "greenSpaceRepository\n:GreenSpaceRepository" as GSR
participant "toDoList\n:ToDoList" as TDL

activate GSM

        GSM -> UI : asks to register a new entry in the to do list
    activate UI

        UI -> CTRL : getGreenSpaceManager()
    activate CTRL

        CTRL -> CTRL : getGSMFromSession()
    activate CTRL

        ref over CTRL
            Get Manager
        end ref

        CTRL --> CTRL : manager
    deactivate CTRL


        CTRL -> GSMO : getGreenSpace()
    activate GSMO

        GSMO --> CTRL : greenSpaceList
    deactivate GSMO

        CTRL --> UI : greenSpaceList
    deactivate CTRL

        UI --> GSM : shows all the Green Spaces managed by the GSM \n and asks to select one
    deactivate UI

        GSM->UI: chooses one
    activate UI

        UI --> GSM : requests data(taskDescription,urgency,duration)
    deactivate UI

        GSM -> UI : types requested data
    activate UI

        UI --> GSM : displays the data and requests confirmation
    deactivate UI

        GSM -> UI : confirms and submits data
    activate UI

        UI -> CTRL: registerEntryToDoList(greenSpaceName,Task(taskDescription,urgency,duration))
    activate CTRL

        CTRL -> RepositorySingleton : getInstance()
    activate RepositorySingleton

        RepositorySingleton --> CTRL: repositories
    deactivate RepositorySingleton

        CTRL -> PLAT: getGreenSpaceRepository()
    activate PLAT

        PLAT --> CTRL: greenSpaceRepository
    deactivate PLAT

        CTRL -> GSR : getGreenSpaceByName(greenSpaceName)
    activate GSR

        GSR --> CTRL : greenSpace
    deactivate GSR

        CTRL -> TDL : registerEntryToDoList(Task(taskDescription,urgency,duration,greenSpace))
    activate TDL

        ref over TDL
            Register Entry
        end

        TDL --> CTRL : true/false
    deactivate TDL

        CTRL --> UI : true/false
    deactivate CTRL

        UI --> GSM : displays operation success
    deactivate UI

deactivate GSM
@enduml